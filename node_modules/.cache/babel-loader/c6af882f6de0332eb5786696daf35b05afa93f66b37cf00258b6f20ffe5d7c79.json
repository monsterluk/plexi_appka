{"ast":null,"code":"// src/hooks/useCalculation.ts\nimport{useEffect,useRef,useCallback}from'react';import{useCalculatorStore}from'../store/calculatorStore';export function useCalculation(productType,options,calculateFn){let debounceMs=arguments.length>3&&arguments[3]!==undefined?arguments[3]:300;const{setCalculationResult}=useCalculatorStore();const timeoutRef=useRef(null);const calculate=useCallback(()=>{try{const result=calculateFn(options);setCalculationResult(productType,result);}catch(error){console.error(\"Error calculating \".concat(productType,\":\"),error);}},[options,productType,calculateFn,setCalculationResult]);useEffect(()=>{// Clear previous timeout\nif(timeoutRef.current){clearTimeout(timeoutRef.current);}// Set new timeout\ntimeoutRef.current=setTimeout(calculate,debounceMs);// Cleanup\nreturn()=>{if(timeoutRef.current){clearTimeout(timeoutRef.current);}};},[calculate,debounceMs]);}","map":{"version":3,"names":["useEffect","useRef","useCallback","useCalculatorStore","useCalculation","productType","options","calculateFn","debounceMs","arguments","length","undefined","setCalculationResult","timeoutRef","calculate","result","error","console","concat","current","clearTimeout","setTimeout"],"sources":["/Users/lukaszsikorra/Projects/plexi_appka/src/hooks/useCalculation.ts"],"sourcesContent":["// src/hooks/useCalculation.ts\nimport { useEffect, useRef, useCallback } from 'react';\nimport { useCalculatorStore } from '../store/calculatorStore';\nimport { CalculationResult } from '../types/calculator.types';\n\nexport function useCalculation<T>(\n  productType: string,\n  options: T,\n  calculateFn: (options: T) => CalculationResult,\n  debounceMs: number = 300\n) {\n  const { setCalculationResult } = useCalculatorStore();\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const calculate = useCallback(() => {\n    try {\n      const result = calculateFn(options);\n      setCalculationResult(productType, result);\n    } catch (error) {\n      console.error(`Error calculating ${productType}:`, error);\n    }\n  }, [options, productType, calculateFn, setCalculationResult]);\n\n  useEffect(() => {\n    // Clear previous timeout\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // Set new timeout\n    timeoutRef.current = setTimeout(calculate, debounceMs);\n\n    // Cleanup\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [calculate, debounceMs]);\n}"],"mappings":"AAAA;AACA,OAASA,SAAS,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CACtD,OAASC,kBAAkB,KAAQ,0BAA0B,CAG7D,MAAO,SAAS,CAAAC,cAAcA,CAC5BC,WAAmB,CACnBC,OAAU,CACVC,WAA8C,CAE9C,IADA,CAAAC,UAAkB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,GAAG,CAExB,KAAM,CAAEG,oBAAqB,CAAC,CAAGT,kBAAkB,CAAC,CAAC,CACrD,KAAM,CAAAU,UAAU,CAAGZ,MAAM,CAAwB,IAAI,CAAC,CAEtD,KAAM,CAAAa,SAAS,CAAGZ,WAAW,CAAC,IAAM,CAClC,GAAI,CACF,KAAM,CAAAa,MAAM,CAAGR,WAAW,CAACD,OAAO,CAAC,CACnCM,oBAAoB,CAACP,WAAW,CAAEU,MAAM,CAAC,CAC3C,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,sBAAAE,MAAA,CAAsBb,WAAW,MAAKW,KAAK,CAAC,CAC3D,CACF,CAAC,CAAE,CAACV,OAAO,CAAED,WAAW,CAAEE,WAAW,CAAEK,oBAAoB,CAAC,CAAC,CAE7DZ,SAAS,CAAC,IAAM,CACd;AACA,GAAIa,UAAU,CAACM,OAAO,CAAE,CACtBC,YAAY,CAACP,UAAU,CAACM,OAAO,CAAC,CAClC,CAEA;AACAN,UAAU,CAACM,OAAO,CAAGE,UAAU,CAACP,SAAS,CAAEN,UAAU,CAAC,CAEtD;AACA,MAAO,IAAM,CACX,GAAIK,UAAU,CAACM,OAAO,CAAE,CACtBC,YAAY,CAACP,UAAU,CAACM,OAAO,CAAC,CAClC,CACF,CAAC,CACH,CAAC,CAAE,CAACL,SAAS,CAAEN,UAAU,CAAC,CAAC,CAC7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}